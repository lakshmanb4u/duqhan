<ion-view view-title="">
  <!-- do you want padding? -->
  <ion-content class="cart has-footer checkout">

    <!-- content goes here -->
    <h5 class="delivery-address">Delivery address</h5>
    <ion-list class="address-box">
      <div class="card m-t-none">
        <div class="item item-text-wrap" ng-show="ctrl.address">
          <h2>{{ctrl.address.contactName}}</h2>
          <p>{{ctrl.address.streetOne}}, {{ctrl.address.streetTwo}}, {{ctrl.address.city}}, {{ctrl.address.state}} - {{ctrl.address.zipCode}}</p>
          <p>{{ctrl.address.phone}}</p>
        </div>
        <div>
          <button class="button button-block button-stable m-none" ng-click="ctrl.changeAddress()">
            <span ng-show="ctrl.address">Change address</span>
            <span ng-hide="ctrl.address">Select address</span>
          </button>
        </div>
      </div>
    </ion-list>

    <h5 class="review-products">Review products</h5>
    <ion-list class="checkout-review-items">
      <div class="cart-items cart-list" ng-repeat="p in ctrl.cart.products" ui-sref="store.product.overview({productId: p.productId})">
        <div class="row product">

          <div class="col col-40 text-center">
            <div class="cart-list-img">
              <img ion-img-cache ng-src="{{p.imgurl || 'store/assets/images/default.jpg'}}">
            </div>
          </div>



          <div class="col col-60">

            <h2>{{p.name}}</h2>
            <p>
              <span ng-if="p.size">Size: {{p.size}}, </span>
              <span ng-if="p.color">Color: {{p.color}}, </span>
              <span>Qty: {{p.qty}}</span>
            </p>
            <h3>{{p.discountedPrice * p.qty | currencySymbol:ctrl.cart.symbol}}
              <span class="discounted-price">{{p.price * p.qty | currencySymbol:ctrl.cart.symbol}}</span>
              <span class="discount-percentage">{{p.discountPCT| number : 0}}% off</span>
            </h3>
            <!--<p>Delivery: <span>Rs.{{p.shippingRate | number : 0}} ({{p.shippingTime}} days)</span></p>-->
            <p>Free Shipping
              <span>(estimated {{p.shippingTime}} days)</span>
            </p>
          </div>
        </div>
      </div>


    </ion-list>
     <div style="margin: 10px 0 10px 20px;">
      <input type="text" placeholder="Have a Promocode?" name="" class="promo-code-input" ng-model="ctrl.promoCode"></input>
      <div class="promo-code-btn" ng-click="ctrl.applyPromo(ctrl.promoCode)">Apply</div>
    </div>
    <span ng-if="ctrl.error" class="promo-code-err">Invalid Promocode</span>

    <h5 class="price-details">Price details</h5>
    <div class="list summary cart-pay">
      <a class="item">
        Total price ({{ctrl.cart.products.length}} items)
        <span class="item-note">
          {{ctrl.cart.orderTotal | currencySymbol:ctrl.cart.symbol}}
        </span>
      </a>
     
      <a class="item">
        Delivery
        <span class="item-note">
          {{ctrl.cart.shippingTotal | number : 0 | currencySymbol:ctrl.cart.symbol}}
        </span>
      </a>
      <a class="item">
        Amount payble
        <span class="item-note">
          {{ctrl.cart.orderTotalWithShipping | currencySymbol:ctrl.cart.symbol}}
        </span>
      </a>
    </div>

    <!--<div>
      <div class="row">
        <div class="col col-40 text-left">
          <img src="store/assets/images/paytm_logo.png" border="0" alt="Paytm Logo" style="max-width: 100%; margin-top: 13px;">
        </div>
        <div class="col col-60 text-right">
          <img src="https://www.paypalobjects.com/webstatic/mktg/logo/AM_mc_vs_dc_ae.jpg" border="0" alt="PayPal Logo" style="max-width: 100%;">
        </div>
      </div>
    </div>-->
    <div class="m-md"></div>
  </ion-content>
  <ion-footer-bar class="cart-footer">
    <div class="row m-none p-none">
      <div class="col col-40 text-center">
        <h3>{{ctrl.cart.orderTotalWithShipping || 0 | currencySymbol:ctrl.cart.symbol}}</h3>
        <button class="button-clear button-small button-light return-policy-button" ui-sref="store.returnpolicy">
          Return Policy
        </button>
      </div>
      <div class="col col-60 text-right">
        <div class="button-bar">
          <button class="button button-positive add-cart-button" ng-click="ctrl.selectPaymentGateway()">Pay</button>
        </div>
      </div>
    </div>
  </ion-footer-bar>
</ion-view>
<script id="select-address-modal.html" type="text/ng-template">
  <ion-modal-view class="new-address-modal">
    <ion-header-bar class="bar-energized">
      <h1 class="title">Select address</h1>
    </ion-header-bar>
    <ion-content class="has-footer">
      <ion-list>
        <ion-radio ng-value="1" value="1" ng-model="address.status" ng-init="ctrl.setSelectedAddess(address)" ng-click="ctrl.setSelectedAddess(address)" ng-repeat="address in ctrl.addresses">
          <h2>{{address.contactName}}</h2>
          <p>{{address.streetOne}}, {{address.streetTwo}}, {{address.city}}, {{address.state}} - {{address.zipCode}}</p>
          <p>{{address.phone}}</p>
        </ion-radio>
        <div class="item item-text-wrap" ng-hide="ctrl.addresses.length > 0">
          You have not added any address yet. Add one now, before the purchase.
          <!-- <button class="button button-clear button-block button-positive" ng-click="ctrl.closeModal()" ui-sref="store.myaddress">My addresses</button> -->
        </div>
      </ion-list>
      <div class="m-t-sm padding">
        <button class="button button-block button-balanced" ng-click="ctrl.addAddress()">Add address</button>
      </div>
      <div class="error server-side text-center m-t-md" ng-hide="ctrl.addressSelectionError || ctrl.selectedAddress">
        <i class="ion-information-circled"></i> Please select an address
      </div>
    </ion-content>
    <ion-footer-bar>
      <div class="button-bar">
        <button class="button button-positive" ng-click="ctrl.selectAddress()">Deliver here</button>
        <button class="button button-stable" ng-click="ctrl.closeModal()">Cancel</button>
      </div>
    </ion-footer-bar>
  </ion-modal-view>
</script>
<div ng-controller="AddressCtrl as ctrl"></div>